<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.team1.project.dao.usFile">


<select id="getFiles" resultType="com.team1.project.dto.UsFileDTO">

    SELECT
        fileNo AS fileNo,
        BOARDNUM AS boardNum,
        file_Name_Org AS fileNameOrg,
        file_Name_real AS fileNameReal,
        length AS length,
        content_type AS contentType,
        reg_date AS regDate
    FROM attach_file
    WHERE BOARDNUM = #{boardNum}
    ORDER BY fileNo
</select>

<select id="getAttacheFile" resultType="com.team1.project.dto.UsFileDTO">
    SELECT
        fileNo AS fileNo,
        BOARDNUM AS boardNum,
        file_Name_Org AS fileNameOrg,
        file_Name_real AS fileNameReal,
        length AS length,
        content_type AS contentType,
        reg_date AS regDate
    FROM attach_file
    WHERE fileNo = #{fileNo}
    ORDER BY fileNo
</select>

<insert id="add">
    INSERT INTO attach_file (
        fileNo,
        BOARDNUM,
        file_Name_Org,
        file_Name_real,
        length,
        content_type
    ) VALUES (
        FILE_NO_SEQ.nextval,
        #{boardNum},
        #{fileNameOrg},
        #{fileNameReal},
        #{length},
        #{contentType}
    )
</insert>

<delete id="delete">
    DELETE FROM attach_file
    WHERE boardnum = #{boardNum}
</delete>

<delete id="deletes">
    DELETE FROM attach_file
    WHERE BOARDNUM IN
    <foreach item="boardnum" collection="array" open="(" separator="," close=")">
        #{boardnum}
    </foreach>
</delete>

</mapper> 